"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[602],{5294:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var s=n(5893),r=n(1151);const o={title:"Name Service",sidebar_label:"Set Structure",sidebar_position:2,slug:"/build/name-service-structure"},a="Set Data Structure",i={id:"build-your-application/proto-logic",title:"Name Service",description:"Extend the template module and add how to store and interact with data. Specifically, you need to set and retrieve a name.",source:"@site/versioned_docs/version-v0.50.x/02-build-your-application/02-proto-logic.md",sourceDirName:"02-build-your-application",slug:"/build/name-service-structure",permalink:"/spawn/v0.50/build/name-service-structure",draft:!1,unlisted:!1,tags:[],version:"v0.50.x",sidebarPosition:2,frontMatter:{title:"Name Service",sidebar_label:"Set Structure",sidebar_position:2,slug:"/build/name-service-structure"},sidebar:"defaultSidebar",previous:{title:"Build a Name Service",permalink:"/spawn/v0.50/build/name-service"},next:{title:"Application Logic",permalink:"/spawn/v0.50/build/name-service-application"}},c={},l=[{value:"Set Name",id:"set-name",level:3},{value:"Get Name",id:"get-name",level:3},{value:"Generate Code",id:"generate-code",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,r.a)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"set-data-structure",children:"Set Data Structure"}),"\n",(0,s.jsx)(t.p,{children:"Extend the template module and add how to store and interact with data. Specifically, you need to set and retrieve a name."}),"\n",(0,s.jsx)(t.h3,{id:"set-name",children:"Set Name"}),"\n",(0,s.jsxs)(t.p,{children:["Open the ",(0,s.jsx)(t.code,{children:"proto/nameservice/v1"})," directory. Edit ",(0,s.jsx)(t.code,{children:"tx.proto"})," to add the transaction setter message."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-protobuf",metastring:'title="proto/nameservice/v1/tx.proto"',children:'\n  // SetServiceName allows a user to set their accounts name.\n  rpc SetServiceName(MsgSetServiceName) returns (MsgSetServiceNameResponse);\n}\n\n// MsgSetServiceName defines the structure for setting a name.\nmessage MsgSetServiceName {\n  option (cosmos.msg.v1.signer) = "sender";\n\n  string sender = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];\n\n  string name = 2;\n}\n\n// MsgSetServiceNameResponse is an empty reply.\nmessage MsgSetServiceNameResponse {}\n'})}),"\n",(0,s.jsx)(n,{children:(0,s.jsxs)(t.p,{children:["proto/nameservice/v1/tx.proto file\n",(0,s.jsx)(t.img,{src:"https://github.com/rollchains/spawn/assets/31943163/73a583e2-9edd-471f-ada6-1010d0dbf072",alt:"proto/nameservice/v1/tx.proto file"})]})}),"\n",(0,s.jsx)(t.h3,{id:"get-name",children:"Get Name"}),"\n",(0,s.jsxs)(t.p,{children:["Find ",(0,s.jsx)(t.code,{children:"query.proto"})," and add the following"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-protobuf",metastring:'title="proto/nameservice/v1/query.proto"',children:'\n  // ResolveName allows a user to resolve the name of an account.\n  rpc ResolveName(QueryResolveNameRequest) returns (QueryResolveNameResponse) {\n    option (google.api.http).get = "/nameservice/v1/name/{wallet}";\n  }\n}\n\n// QueryResolveNameRequest grabs the name of a wallet.\nmessage QueryResolveNameRequest {\n  string wallet = 1;\n}\n\n// QueryResolveNameResponse grabs the wallet linked to a name.\nmessage QueryResolveNameResponse {\n  string name = 1;\n}\n'})}),"\n",(0,s.jsx)(n,{children:(0,s.jsxs)(t.p,{children:["proto/nameservice/v1/query.proto\n",(0,s.jsx)(t.img,{src:"https://github.com/rollchains/spawn/assets/31943163/234a13d7-be62-492d-961c-63e92d7543d9",alt:"proto/nameservice/v1/query.proto file"})]})}),"\n",(0,s.jsx)(t.h2,{id:"generate-code",children:"Generate Code"}),"\n",(0,s.jsx)(t.p,{children:"These .proto file templates will be converted into Golang source code for you to use. Build the Go source code using the command:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"make proto-gen\n"})}),"\n",(0,s.jsx)(n,{children:(0,s.jsxs)(t.p,{children:["make proto-gen expected output\n",(0,s.jsx)(t.img,{src:"https://github.com/rollchains/spawn/assets/31943163/c51bf57c-e83a-4004-8041-9b1f3d3a24f4",alt:"make proto-gen"})]})})]})}function u(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>i,a:()=>a});var s=n(7294);const r={},o=s.createContext(r);function a(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);
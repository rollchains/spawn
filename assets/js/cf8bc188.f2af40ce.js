"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[308],{4273:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var s=n(5893),a=n(1151);const o={title:"CW NFTs",sidebar_label:"CosmWasm NFTs",slug:"/demo/cw-nft"},r="Non-fungible Token Demo",i={id:"demos/cw-nft-demo",title:"CW NFTs",description:"You will build a new chain with CosmWasm, enabling support for smart contracts on a new Cosmos-SDK application. You will download a pre-built contract, upload it, and interact with it to transfer the ownership of some data.",source:"@site/versioned_docs/version-v0.50.x/03-demos/02-cw-nft-demo.md",sourceDirName:"03-demos",slug:"/demo/cw-nft",permalink:"/spawn/v0.50/demo/cw-nft",draft:!1,unlisted:!1,tags:[],version:"v0.50.x",sidebarPosition:2,frontMatter:{title:"CW NFTs",sidebar_label:"CosmWasm NFTs",slug:"/demo/cw-nft"},sidebar:"defaultSidebar",previous:{title:"IBC Transfers",permalink:"/spawn/v0.50/demo/ibc"},next:{title:"Token Factory",permalink:"/spawn/v0.50/demo/tokenfactory"}},c={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Create your chain",id:"create-your-chain",level:2},{value:"Start the testnet",id:"start-the-testnet",level:2},{value:"Verify CosmWasm is enabled",id:"verify-cosmwasm-is-enabled",level:2},{value:"Upload the contract to the network",id:"upload-the-contract-to-the-network",level:2},{value:"Verify the code was uploaded",id:"verify-the-code-was-uploaded",level:2},{value:"Create a new NFT collection",id:"create-a-new-nft-collection",level:2},{value:"Contract address",id:"contract-address",level:2},{value:"Create an NFT in the collection",id:"create-an-nft-in-the-collection",level:2},{value:"Grab this NFT data",id:"grab-this-nft-data",level:2},{value:"Transfer the NFT to another account",id:"transfer-the-nft-to-another-account",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"non-fungible-token-demo",children:"Non-fungible Token Demo"}),"\n",(0,s.jsxs)(t.p,{children:["You will build a new chain with ",(0,s.jsx)(t.a,{href:"https://cosmwasm.com/",children:"CosmWasm"}),", enabling support for smart contracts on a new Cosmos-SDK application. You will download a pre-built contract, upload it, and interact with it to transfer the ownership of some data."]}),"\n",(0,s.jsxs)(t.p,{children:["If you do not know what an NFT is, you can read about them here: ",(0,s.jsx)(t.a,{href:"https://www.investopedia.com/non-fungible-tokens-nft-5115211",children:"investopedia.com/non-fungible-tokens-nft"}),"."]}),"\n",(0,s.jsx)(t.admonition,{title:"Warning",type:"note",children:(0,s.jsxs)(t.p,{children:["Some parts of this tutorial will not have the added context about spawn's inner workings or how commands work. Run through ",(0,s.jsx)(t.a,{href:"/spawn/v0.50/build/name-service",children:"Build Your Application"})," for this context."]})}),"\n",(0,s.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/spawn/v0.50/install/system-setup",children:"System Setup"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/spawn/v0.50/install/install-spawn",children:"Install Spawn"})}),"\n"]}),"\n",(0,s.jsxs)(t.admonition,{title:"Danger",type:"note",children:[(0,s.jsx)(t.p,{children:"Some machines like Windows will not work with running the testnet. This is a limitation of the operating system hardware with wasm and required C language libraries / DLLs."}),(0,s.jsxs)(t.p,{children:["For the best experience, try ",(0,s.jsx)(t.code,{children:"make testnet"})," or use a Linux machine or a cloud-based linux instance from ",(0,s.jsx)(t.a,{href:"https://www.hetzner.com/cloud/",children:"Hetzner"})," or ",(0,s.jsx)(t.a,{href:"https://www.digitalocean.com/pricing/droplets",children:"Digital Ocean"})," for $6 per month."]})]}),"\n",(0,s.jsx)(t.h2,{id:"create-your-chain",children:"Create your chain"}),"\n",(0,s.jsx)(t.p,{children:"Build a new chain that has CosmWasm configured."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"GITHUB_USERNAME=rollchains\n\nspawn new rollchain \\\n--consensus=proof-of-stake \\\n--bech32=roll \\\n--denom=uroll \\\n--bin=rolld \\\n--disabled=block-explorer \\\n--org=${GITHUB_USERNAME}\n"})}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"View UI Selector"}),(0,s.jsxs)(t.p,{children:["If you remove the ",(0,s.jsx)(t.code,{children:"--disabled"})," flag; a more intuitive UI selection approach will be taken. Make sure CosmWasm is selected with the green arrow, then press ",(0,s.jsx)(t.code,{children:"done"}),"."]}),(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:"https://github.com/user-attachments/assets/16698f3f-143b-4258-9ff2-fc429764b58c",alt:"Image"})})]}),"\n",(0,s.jsx)(t.h2,{id:"start-the-testnet",children:"Start the testnet"}),"\n",(0,s.jsx)(t.admonition,{title:"Note",type:"note",children:(0,s.jsxs)(t.p,{children:["If ",(0,s.jsx)(t.code,{children:"make sh-testnet"})," does not start due to a port bind error, you can kill your previously running testnet with ",(0,s.jsx)(t.code,{children:"killall -9 rolld"}),", then try again."]})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# move into the chain directory\ncd rollchain\n\n# - Installs the binary\n# - Setups the default keys with funds\n# - Starts the chain in your shell\nmake sh-testnet\n"})}),"\n",(0,s.jsx)(t.h2,{id:"verify-cosmwasm-is-enabled",children:"Verify CosmWasm is enabled"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"rolld q wasm params\n"})}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Expected Output"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"code_upload_access:\n  addresses: []\n  permission: Everybody\n  instantiate_default_permission: Everybody\n"})})]}),"\n",(0,s.jsx)(t.h2,{id:"upload-the-contract-to-the-network",children:"Upload the contract to the network"}),"\n",(0,s.jsxs)(t.p,{children:["You will use the ",(0,s.jsx)(t.a,{href:"https://github.com/public-awesome/cw-nfts",children:"CW721"})," contract for your NFT journey. CW721 stands for CosmWasm 721. ",(0,s.jsx)(t.a,{href:"https://www.coinbase.com/learn/crypto-glossary/what-is-erc-721",children:"721 corresponds to the Ethereum specification for NFTs"}),". Understanding this is out of scope for this tutorial. Just know you can create, transfer, and query data."]}),"\n",(0,s.jsx)(t.p,{children:"Download the contract code from the CosmWasm NFTs repository, then upload it to the network with the application binary."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# Download the the NFT contract to your machine\ncurl -LO https://github.com/public-awesome/cw-nfts/releases/download/v0.19.0/cw721_base.wasm\n\n# Upload the source code to the chain\n# - gas is is amount of compute resources to allocate.\nrolld tx wasm store ./cw721_base.wasm --from=acc0 \\\n    --gas=auto --gas-adjustment=2.0 --yes\n"})}),"\n",(0,s.jsx)(t.h2,{id:"verify-the-code-was-uploaded",children:"Verify the code was uploaded"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'# Code id: "1" is available\nrolld q wasm list-code\n\n# See the details (A lot of spam)\nrolld q tx 4601FBACBDF93E4309D92E968F8B4E7F9177BCB132B65AA363AFDC26FE6B5CB6\n'})}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Expected Code Info"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'(main) -> $ rolld q wasm list-code\ncode_infos:\n- code_id: "1"\n  creator: roll1hj5fveer5cjtn4wd6wstzugjfdxzl0xpg2te87\n  data_hash: E13AA30E0D70EA895B294AD1BC809950E60FE081B322B1657F75B67BE6021B1C\n  instantiate_permission:\n    addresses: []\n    permission: Everybody\npagination:\n  next_key: null\n  total: "0"\n'})})]}),"\n",(0,s.jsx)(t.h2,{id:"create-a-new-nft-collection",children:"Create a new NFT collection"}),"\n",(0,s.jsx)(t.p,{children:"With the source now uploaded, anyone can create a new NFT collection with this base contract code now on the chain. This will be a new contract that only you control. Now, instantiate the contract to create the new NFT collection."}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Instantiate Format Source"}),(0,s.jsx)(t.p,{children:"You can find the instantiate, execute, and query messages (json) formats in the contract source code."}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",metastring:'reference title="packages/cw721/src/msg.rs"',children:"https://github.com/public-awesome/cw-nfts/blob/v0.19.0/packages/cw721/src/msg.rs#L126-L143\n"})})]}),"\n",(0,s.jsxs)(t.admonition,{title:"Warning",type:"note",children:[(0,s.jsx)(t.p,{children:"Notice the MESSAGE= below has no spaces in the JSON. This is required for the command line to parse it correctly. Failure to do so will result in the error"}),(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:'ERR failure when running app err="accepts 2 arg(s), received 3"'})})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'# Get our account address for the acc0 wallet / key.\nrolld keys show acc0 -a # roll1hj5fveer5cjtn4wd6wstzugjfdxzl0xpg2te87\n\n# Create the NFT collection with our account\n# as the authorized minter / creator for new NFTs.\nMESSAGE=\'{"name":"Roll","symbol":"ROLL","minter":"roll1hj5fveer5cjtn4wd6wstzugjfdxzl0xpg2te87"}\'\n\n# Create the NFT collection\nrolld tx wasm instantiate 1 $MESSAGE --no-admin --from=acc0 --label="my-nft" \\\n    --gas=auto --gas-adjustment=2.0 --yes\n'})}),"\n",(0,s.jsx)(t.h2,{id:"contract-address",children:"Contract address"}),"\n",(0,s.jsxs)(t.p,{children:["A contract address is where all the collection and information is stored. It never changes and is the unique identifier for interaction. Think of this similar to a website, google.com always brings you to google search. ",(0,s.jsx)(t.code,{children:"NFT_CONTRACT"})," is always the RollNFTs collection."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"# View all contract addresses a wallet has created\nrolld q wasm list-contracts-by-creator roll1hj5fveer5cjtn4wd6wstzugjfdxzl0xpg2te87\n\n# The contract address for the NFT collection just created\nNFT_CONTRACT=roll14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9sjczpjh\n"})}),"\n",(0,s.jsx)(t.h2,{id:"create-an-nft-in-the-collection",children:"Create an NFT in the collection"}),"\n",(0,s.jsx)(t.p,{children:"The acc0 account now must create the first NFT in the collection since it is the minter. Specify the unique ID (1), the owner (acc0), and some data to be associated with this NFT. Set the url of a sunflower image as the metadata for this tutorial."}),"\n",(0,s.jsx)(t.admonition,{title:"Note",type:"note",children:(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"token_uri"})," is a URL that points to the metadata of the NFT. This can be a ",(0,s.jsx)(t.a,{href:"https://eips.ethereum.org/EIPS/eip-721#specification",children:"JSON object"})," or a URL to a JSON object.\nThis URL can be a link to an external service like ",(0,s.jsx)(t.a,{href:"https://ipfs.tech/",children:"IPFS"}),", or the raw text directly. The contract does not care, it is up to you to manage the data and build the services around it."]})}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Execute Format Source"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",metastring:'reference title="packages/cw721/src/msg.rs"',children:"https://github.com/public-awesome/cw-nfts/blob/v0.19.0/packages/cw721/src/msg.rs#L80-L91\n"})})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'MESSAGE=\'{"mint":{"token_id":"1","owner":"roll1hj5fveer5cjtn4wd6wstzugjfdxzl0xpg2te87","token_uri":"https://onlinejpgtools.com/images/examples-onlinejpgtools/sunflower.jpg"}}\'\n\nrolld tx wasm execute $NFT_CONTRACT $MESSAGE --from=acc0 \\\n    --gas=auto --gas-adjustment=2.0 --yes\n'})}),"\n",(0,s.jsx)(t.h2,{id:"grab-this-nft-data",children:"Grab this NFT data"}),"\n",(0,s.jsxs)(t.p,{children:["There is now an NFT with the ID of 1 owned by ",(0,s.jsx)(t.code,{children:"roll1hj5fveer5cjtn4wd6wstzugjfdxzl0xpg2te87"}),". Now query the contract to see the data and verify it is correct."]}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Query Format Source"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",metastring:'reference title="packages/cw721/src/msg.rs"',children:"https://github.com/public-awesome/cw-nfts/blob/v0.19.0/packages/cw721/src/msg.rs#L157-L161\n"})}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",metastring:'reference title="packages/cw721/src/msg.rs"',children:"https://github.com/public-awesome/cw-nfts/blob/v0.19.0/packages/cw721/src/msg.rs#L236-L240\n"})})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'# Get who is the owner of ID 1\nrolld q wasm state smart $NFT_CONTRACT \'{"owner_of":{"token_id":"1"}}\'\n\n# Retrieve the NFT info\nrolld q wasm state smart $NFT_CONTRACT \'{"nft_info":{"token_id":"1"}}\'\n'})}),"\n",(0,s.jsx)(t.h2,{id:"transfer-the-nft-to-another-account",children:"Transfer the NFT to another account"}),"\n",(0,s.jsx)(t.p,{children:"Now move the token from the originally minted account (acc0) to another account (acc1). This is a simple transfer of ownership to move who owns the data."}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Execute Format Source"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-rust",metastring:'reference title="packages/cw721/src/msg.rs"',children:"https://github.com/public-awesome/cw-nfts/blob/v0.19.0/packages/cw721/src/msg.rs#L44-L48\n"})})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'# Recipient account\nrolld keys show acc1 -a # roll1efd63aw40lxf3n4mhf7dzhjkr453axur57cawh\n\nMESSAGE=\'{"transfer_nft":{"recipient":"roll1efd63aw40lxf3n4mhf7dzhjkr453axur57cawh","token_id":"1"}}\'\nrolld tx wasm execute $NFT_CONTRACT $MESSAGE --from=acc0 --gas=auto --gas-adjustment=2.0 --yes\n\n# Get who is the owner of 1\n# Moved to: roll1efd63aw40lxf3n4mhf7dzhjkr453axur57cawh\nrolld q wasm state smart $NFT_CONTRACT \'{"owner_of":{"token_id":"1"}}\'\n'})}),"\n",(0,s.jsx)(t.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(t.p,{children:"In this tutorial, you built a new chain with CosmWasm enabled, launched a testnet for it, and launched an NFT collection! You uploaded a contract, created an NFT, and transferred it to another account. This is the foundation for building a new unique marketplace or game on the Interchain."})]})}function h(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>i,a:()=>r});var s=n(7294);const a={},o=s.createContext(a);function r(e){const t=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(o.Provider,{value:t},e.children)}}}]);